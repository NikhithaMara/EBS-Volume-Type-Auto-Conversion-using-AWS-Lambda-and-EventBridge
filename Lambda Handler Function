import boto3                                                                          #import boto3 package for python

def get_volume_id_from_arn(volume_arn):                                               #function to get volume id from the whole resource string of the event attribute
    # Split the ARN using the colon ':' separator
    arn_parts = volume_arn.split(':')
    # The volume ID is the last part of the ARN after the 'volume/' prefix
    volume_id = arn_parts[-1].split('/')[-1]
    return volume_id

def lambda_handler(event, context):                                                    #main handler function called when lambda is triggered
    volume_arn = event['resources'][0]                                                 #the ebs volume info is under resources tag in event in json format so parsing it
    volume_id = get_volume_id_from_arn(volume_arn)                                     #get volumeid from the whole string handled by get_volume_id_from_arn function

    ec2_client = boto3.client('ec2')                                                   #boto3 client ec2 as its a ebs function
    response = ec2_client.modify_volume(                                               #call api modify volume 
        VolumeId=volume_id,
        VolumeType='gp3',
    )
